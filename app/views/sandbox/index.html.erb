
<h1>Hello World</h1>

<section class="main-content">
    <p>A demo of the Camera API, currently implemented in Firefox and Google Chrome on Android. Choose to take a picture with your device's camera and a preview will be shown through createObjectURL or a FileReader object (choosing local files supported too).</p>
    
    <p>
        <input type="file" id="take-picture" accept="image/*">
    </p>

    <h2>Preview:</h2>
    <p>
        <img src="about:blank" alt="" id="show-picture">
    </p>

    <p id="error"></p>

</section>


<div id="mapContainer">
</div>





<% content_for :javascripts do %>

<script type="text/javascript" src="http://maps.google.com/maps/api/js"></script>

<script>
function success(position) {
  var mapcanvas = document.createElement('div');
  mapcanvas.id = 'map';
  mapcanvas.style.height = '400px';
  mapcanvas.style.width = '600px';

  document.querySelector('#mapContainer').appendChild(mapcanvas);

  var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
  
  var options = {
    zoom: 15,
    center: coords,
    mapTypeControl: false,
    navigationControlOptions: {
        style: google.maps.NavigationControlStyle.SMALL
    },
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("map"), options);

  var marker = new google.maps.Marker({
      position: coords,
      map: map,
      title:"publicAds"
  });
console.log(position.coords.latitude );
 
 console.log(position.coords.longitude );
}


if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(success);
} else {
  error('Geo Location is not supported');
}

</script>

<script type="text/javascript">
	var takePicture = document.querySelector("#take-picture");
takePicture.onchange = function (event) {
    // Get a reference to the taken picture or chosen file
    var files = event.target.files,
        file;
    if (files && files.length > 0) {
        file = files[0];
    }
};


</script>

<script type="text/javascript">
	(function () {
    var takePicture = document.querySelector("#take-picture"),
        showPicture = document.querySelector("#show-picture");

    if (takePicture && showPicture) {
        // Set events
        takePicture.onchange = function (event) {
            // Get a reference to the taken picture or chosen file
            var files = event.target.files,
                file;
            if (files && files.length > 0) {
                file = files[0];
                try {
                    // Create ObjectURL
                    var imgURL = window.URL.createObjectURL(file);

                    // Set img src to ObjectURL
                    showPicture.src = imgURL;

                    // Revoke ObjectURL
                    URL.revokeObjectURL(imgURL);
                }
                catch (e) {
                    try {
                        // Fallback if createObjectURL is not supported
                        var fileReader = new FileReader();
                        fileReader.onload = function (event) {
                            showPicture.src = event.target.result;
                        };
                        fileReader.readAsDataURL(file);
                    }
                    catch (e) {
                        //
                        var error = document.querySelector("#error");
                        if (error) {
                            error.innerHTML = "Neither createObjectURL or FileReader are supported";
                        }
                    }
                }
            }
        };
    }
})();
</script>



<%end%>